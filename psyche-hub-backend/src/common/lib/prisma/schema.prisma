generator client {
  provider = "prisma-client-js"
  output   = "../src/common/lib/prisma"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model article_categories {
  article_id  String     @db.Uuid
  category_id String     @db.Uuid
  created_at  DateTime?  @default(now()) @db.Timestamptz(6)
  updated_at  DateTime?  @default(now()) @db.Timestamptz(6)
  article     articles   @relation(fields: [article_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  category    categories @relation(fields: [category_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([article_id, category_id])
}

model article_tags {
  article_id String    @db.Uuid
  tag_id     String    @db.Uuid
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  updated_at DateTime? @default(now()) @db.Timestamptz(6)
  article    articles  @relation(fields: [article_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  tag        tags      @relation(fields: [tag_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@id([article_id, tag_id])
}

model articles {
  id                 String               @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title              String
  content            String?
  author_id          String?              @db.Uuid
  created_at         DateTime?            @default(now()) @db.Timestamptz(6)
  updated_at         DateTime?            @default(now()) @db.Timestamptz(6)
  cover_img          String?              @default("")
  summary            String?
  article_categories article_categories[]
  article_tags       article_tags[]
  author             psychologists?       @relation(fields: [author_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model categories {
  id                 String               @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  label              String               @unique
  created_at         DateTime?            @default(now()) @db.Timestamptz(6)
  updated_at         DateTime?            @default(now()) @db.Timestamptz(6)
  article_categories article_categories[]
}

model psychologists {
  id         String     @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name       String
  email      String     @unique
  phone      String?
  created_at DateTime?  @default(now()) @db.Timestamptz(6)
  updated_at DateTime?  @default(now()) @db.Timestamptz(6)
  articles   articles[]
}

model tags {
  id           String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  label        String         @unique
  created_at   DateTime?      @default(now()) @db.Timestamptz(6)
  updated_at   DateTime?      @default(now()) @db.Timestamptz(6)
  article_tags article_tags[]
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model users {
  id           String @db.Uuid
  profile_id   String @db.Uuid
  profile_type String
  role         String @db.VarChar(100)
  password     String @db.VarChar(30)

  @@ignore
}
